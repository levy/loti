# What’s this Project?

This project implements the peer-to-peer partial event ordering network described in [the original paper](https://docs.google.com/document/d/1KmdknFYkGlxhLoKOQb9g14LW4Jg7zIReaa_GsB5aJio) also written by me. The project uses a well-known C++ discrete event communication network simulator [OMNeT++ 5.4](https://omnetpp.org) and it's most widely used model catalog [INET 4.0](https://inet.omnetpp.org).

# What’s in the Simulation Model?

The simulation model consists of three application models: the publisher, the browser and the daemon. The project also contains an example simulation to demonstrate the operation of the simulation model, and to provide some meaningful statistics.

## What Does the Publisher Application Do?

The publisher application represents an actor that is publishing digital data on the Internet. Basically, it creates digital events periodically with some randomly generated content. Both the creation interval and the content length are parameters of the application, and they can be specified using distributions. The generated events are passed to the daemon application running in the same node for including their hash in the event graph. The utilized hashing algorithm is SHA256.

## What Does the Browser Application Do?

The browser application starts an event chain discovery periodically using the daemon. It randomly chooses an existing event among all events generated by all nodes. In a real world example, the events would be provided by web servers. The discovery interval, similarly to the above, is a parameter of the application. When the discovery is completed, the browser application displays the resulting local time interval to the user. The interval is simply the timestamp difference between the first and the last event in the chain.

## What Does the Daemon Application Do?

The daemon application periodically creates clock events with local timestamps. Each new clock event contains a reference to the last local clock event, to the last known clock event of all neighbors, and to all not yet referenced local events.

The daemon application sends the hash of each new clock event to each neighbor daemon. This type of packet is called the clock event notification. All communication between daemons uses UDP.

When an event chain discovery is requested, the daemon applications in the network work together to find out the shortest event chain that includes the requested event. The result is then passed back to the application.

The event chain discovery uses two type of packets, a discovery request, and a discovery response. Both types are used recursively along the overlay routing on the peer to peer network.

All completed event chain discoveries end with validating the event chain by the node which started the discovery. Validation includes verifying the hash of all events in the chain, verifying that each event references the previous event in the chain, verifying that the chain includes the originally requested event, and finally verifying that the first and last events are locally created events.

# What Statistics Does the Simulation Collect?

In OMNeT++, statistics can be collected in three forms: scalar, histogram and vector data.

Each daemon collects several statistics during the simulation:
 - Size of local clock event database
 - Number of started event chain discoveries (
 - Number of failed event chain discoveries
 - Number of completed event chain discoveries

Additionally, for completed event chain discoveries each daemon collects the following:
 - Total simulation time to complete the discovery. This includes all packet exchanges and processing.
 - Length of the event chain. This is the sum of the length of the lower and upper bound for the requested event.
 - Local time interval of the event chain. This is the difference between the timestamps of the first and last events in the chain.

Finally, INET collects several other statistics by default. For example, UDP collects:
 - Total amount of data sent

# What's in the Example Simulation?

The included simple example uses a handcrafted homogenous network where each node runs all three applications. The network is automatically configured properly so that each network interface in each node has an assigned static IPv4 address and all routing tables contain static IPv4 routes using the shortest path towards all destinations.

Moreover, since the peer to peer network is an overlay network, all daemons are configured to know their neighbors and the next hop neighbor towards all destinations. This overlay would be useful for more realistic simulations where neighbors are not directly connected, that is they are not on the same LAN.

Clock events are generated as…
Events are generated as…
Event chain discoveries are started as….

The network contains 666 nodes, 666 interfaces, 666 links.

# What are the Results?

The average time to complete an event chain discovery is … the average length of the resulting event chain is…. The average local time interval of the event chain is….
The relative event chain discoveries completed to the number of started is….

Include some diagrams
